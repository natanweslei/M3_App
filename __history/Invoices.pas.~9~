unit Invoices;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics,
  Controls, Forms, uniGUITypes, uniGUIAbstractClasses, DBCtrls,
  uniGUIClasses, uniGUIFrame, Data.DB, Data.Win.ADODB, uniDBNavigator,
  uniGUIBaseClasses, uniPanel, uniBasicGrid, uniDBGrid, uniEdit,
  uniDateTimePicker;

type
  TFrmInvoices = class(TUniFrame)
    UniPanel1: TUniPanel;
    procedure UniDBGrid1ColumnFilter(Sender: TUniDBGrid;
      const Column: TUniDBGridColumn; const Value: Variant);
    procedure UniDBGrid1CellClick(Column: TUniDBGridColumn);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

implementation

{$R *.dfm}

uses MainModule, Main;


procedure TFrmInvoices.UniDBGrid1CellClick(Column: TUniDBGridColumn);
begin
  with ADOQuery2 do
   begin
     close;
     Parameters.ParamByName('id').Value:=UniMainModule.QueryInvoices.FieldByName('i.id').AsInteger;
     Open;
   end;
end;

procedure TFrmInvoices.UniDBGrid1ColumnFilter(Sender: TUniDBGrid;
  const Column: TUniDBGridColumn; const Value: Variant);
begin
  UniMainModule.QueryInvoices.Filtered := False;
   if Value <>'' then
    begin
      UniMainModule.QueryInvoices.Filter := Column.FieldName+ ' like %'+Trim(Value)+'%';
      UniMainModule.QueryInvoices.Filtered := True;
    end;
end;


initialization
  RegisterClass(TFrmInvoices);

end.
